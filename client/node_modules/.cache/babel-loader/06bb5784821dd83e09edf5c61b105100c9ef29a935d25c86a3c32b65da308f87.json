{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mrityunjay kumar\\\\OneDrive\\\\Desktop\\\\connect-real-time-code-editor-main\\\\client\\\\src\\\\components\\\\Editor.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useRef } from \"react\";\nimport { ACTIONS } from \"../Action\";\nimport { basicSetup } from \"codemirror\";\nimport { EditorView, keymap } from \"@codemirror/view\";\nimport { javascript } from \"@codemirror/lang-javascript\";\nimport { Compartment, EditorState } from \"@codemirror/state\";\nimport { oneDark } from \"@codemirror/theme-one-dark\";\nimport { defaultKeymap, indentWithTab } from \"@codemirror/commands\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Editor = ({\n  socketRef,\n  roomId,\n  onCodeChange\n}) => {\n  _s();\n  const editor = useRef();\n  const codeMirrorRef = useRef();\n  const updateValue = EditorView.updateListener.of(function (e) {\n    if (e.selectionSet) {\n      const code = e.state.doc.toString();\n      onCodeChange(code);\n      socketRef.current.emit(ACTIONS.CODE_CHANGE, {\n        roomId,\n        code\n      });\n    }\n  });\n  useEffect(() => {\n    if (socketRef.current) {\n      socketRef.current.on(ACTIONS.CODE_CHANGE, ({\n        code\n      }) => {\n        if (code !== null) {\n          onCodeChange(code);\n          codeMirrorRef.current.dispatch({\n            changes: {\n              from: 0,\n              to: codeMirrorRef.current.state.doc.length,\n              insert: code\n            }\n          });\n        }\n      });\n    }\n  }, [socketRef.current]);\n  useEffect(() => {\n    const editorTheme = new Compartment();\n    const customTheme = EditorView.theme({\n      \"&\": {\n        color: \"#DDD\",\n        fontSize: \"25px\",\n        fontFamily: \"'Roboto Mono',Consolas,monospace\"\n      }\n    });\n    const startState = EditorState.create({\n      extensions: [updateValue, customTheme, basicSetup, keymap.of([defaultKeymap, indentWithTab]), javascript(), editorTheme.of(oneDark)]\n    });\n    const view = new EditorView({\n      state: startState,\n      extensions: [customTheme],\n      parent: editor.current\n    });\n    codeMirrorRef.current = view;\n    return () => {\n      view.destroy();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: editor\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 10\n  }, this);\n};\n_s(Editor, \"3WUpqscQMnKtkT4/Fm0oGUjR7Vs=\");\n_c = Editor;\nexport default Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useEffect","useState","useRef","ACTIONS","basicSetup","EditorView","keymap","javascript","Compartment","EditorState","oneDark","defaultKeymap","indentWithTab","jsxDEV","_jsxDEV","Editor","socketRef","roomId","onCodeChange","_s","editor","codeMirrorRef","updateValue","updateListener","of","e","selectionSet","code","state","doc","toString","current","emit","CODE_CHANGE","on","dispatch","changes","from","to","length","insert","editorTheme","customTheme","theme","color","fontSize","fontFamily","startState","create","extensions","view","parent","destroy","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Mrityunjay kumar/OneDrive/Desktop/connect-real-time-code-editor-main/client/src/components/Editor.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useRef } from \"react\";\nimport { ACTIONS } from \"../Action\";\nimport { basicSetup } from \"codemirror\";\nimport { EditorView, keymap } from \"@codemirror/view\";\nimport { javascript } from \"@codemirror/lang-javascript\";\nimport { Compartment, EditorState } from \"@codemirror/state\";\nimport { oneDark } from \"@codemirror/theme-one-dark\";\nimport { defaultKeymap, indentWithTab } from \"@codemirror/commands\";\n\nconst Editor = ({ socketRef, roomId, onCodeChange }) => {\n  const editor = useRef();\n  const codeMirrorRef = useRef();\n\n  \n  const updateValue = EditorView.updateListener.of(function (e) {\n    if (e.selectionSet) {\n      const code = e.state.doc.toString();\n      onCodeChange(code);\n      socketRef.current.emit(ACTIONS.CODE_CHANGE, {\n        roomId,\n        code,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (socketRef.current) {\n      socketRef.current.on(ACTIONS.CODE_CHANGE, ({ code }) => {\n        if (code !== null) {\n          onCodeChange(code);\n          codeMirrorRef.current.dispatch({\n            changes: {\n              from: 0,\n              to: codeMirrorRef.current.state.doc.length,\n              insert: code,\n            },\n          });\n        }\n      });\n    }\n\n  }, [socketRef.current]);\n\n  useEffect(() => {\n    const editorTheme = new Compartment();\n    const customTheme = EditorView.theme({\n      \"&\": {\n        color: \"#DDD\",\n        fontSize: \"25px\",\n        fontFamily: \"'Roboto Mono',Consolas,monospace\",\n      },\n    });\n    const startState = EditorState.create({\n      extensions: [\n        updateValue,\n        customTheme,\n        basicSetup,\n        keymap.of([defaultKeymap, indentWithTab]),\n        javascript(),\n        editorTheme.of(oneDark),\n      ],\n    });\n\n    const view = new EditorView({\n      state: startState,\n      extensions: [customTheme],\n      parent: editor.current,\n    });\n\n    codeMirrorRef.current = view;\n\n    return () => {\n      view.destroy();\n    };\n  }, []);\n\n  return <div ref={editor}></div>;\n};\n\nexport default Editor;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}